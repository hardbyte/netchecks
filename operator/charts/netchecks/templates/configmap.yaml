apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "netchecks.fullname" . }}
  labels: {{ include "netchecks.labels" . | nindent 4 }}
data:
  config.json: |-
    {
      "probe": {
        "image": {
          "pullPolicy":{{ .Values.probeConfig.image.pullPolicy | quote }},
          "repository":{{ .Values.probeConfig.image.repository | quote }},
          "tag":{{ .Values.probeConfig.image.tag | default .Chart.AppVersion | quote }}
        },
        "resources": {
          "limits": {
             "cpu":{{ .Values.probeConfig.resources.limits.cpu | quote }},
             "memory":{{ .Values.probeConfig.resources.limits.memory | quote }}
           },
            "requests": {
             "cpu":{{ .Values.probeConfig.resources.requests.cpu | quote }},
             "memory":{{ .Values.probeConfig.resources.requests.memory | quote }}
           }
        },   
        "imagePullSecrets": {{ .Values.probeConfig.imagePullSecrets | toJson }},
        "podAnnotations": {{ .Values.probeConfig.podAnnotations | toJson }}
        }
    }
